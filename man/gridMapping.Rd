% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/datamodel.R
\name{gridMapping}
\alias{gridMapping}
\title{Create grid coordinate mapping for MEA channels}
\usage{
gridMapping(data, stored_chid, grid_n = 48, joiner = "spike_chid")
}
\arguments{
\item{data}{data.frame. Input data containing channel information}

\item{stored_chid}{Integer vector. Available channel indices from MEA chip}

\item{grid_n}{Integer. Grid dimension for square array layout:
\describe{
\item{48}{2304-channel chips (48x48 grid)}
\item{32}{1024-channel chips (32x32 grid)}
\item{64}{4096-channel chips (64x64 grid)}
}}

\item{joiner}{Character. Column name in data to join with channel mapping.
Common values: "spike_chid", "fp_chid", "burst_chidx" (default: "spike_chid")}
}
\value{
data.frame with original data plus spatial coordinates:
\describe{
\item{X}{Integer. Grid X coordinate (1-based, left to right)}
\item{Y}{Integer. Grid Y coordinate (1-based, top to bottom)}
}
}
\description{
Maps linear channel indices to 2D grid coordinates for spatial analysis
and visualization. Supports different chip configurations and flexible
data frame integration through customizable join columns.
}
\details{
Channel indexing follows 3Brain convention:
\itemize{
\item Linear indices are 0-based in file, converted to 1-based grid
\item Grid coordinates use mathematical convention (1,1) = top-left
\item X increases left to right, Y increases top to bottom
\item Formula: X = (index \\%\\% grid_n) + 1, Y = (index \\%/\\% grid_n) + 1
}
}
\examples{
\dontrun{
# Example spike data
spike_data <- data.frame(
  spike_times = c(1.2, 1.5, 2.1),
  spike_chid = c(0, 47, 2303)
)

# Channel indices from file
stored_channels <- 0:2303

# Add grid coordinates for 2304-channel chip
mapped_data <- gridMapping(spike_data, stored_channels, 
                           grid_n = 48, joiner = "spike_chid")

# Now data includes X, Y coordinates
print(mapped_data[c("spike_chid", "X", "Y")])
#   spike_chid  X  Y
#           0   1  1  (top-left)
#          47  48  1  (top-right)  
#        2303  48 48  (bottom-right)
}
}
\seealso{
\code{\link{bxrSpikedata}}, \code{\link{bxrFpdata}}
}
